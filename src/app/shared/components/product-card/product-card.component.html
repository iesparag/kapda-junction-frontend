<div class="product-card">
  <div class="product-image" [routerLink]="['/products', product.id]">
    <img [src]="product.images[0] || 'https://via.placeholder.com/300x300'" [alt]="product.name">
    <div class="discount-badge" *ngIf="product.discount">
      {{ product.discount }}% OFF
    </div>
    <div class="product-actions-overlay">
      <button class="action-btn wishlist-btn" 
              [class.active]="isInWishlist"
              (click)="toggleWishlist($event)"
              [title]="isInWishlist ? 'Remove from wishlist' : 'Add to wishlist'">
        <span class="icon">{{ isInWishlist ? 'â™¥' : 'â™¡' }}</span>
      </button>
    </div>
  </div>
  <div class="product-info" [routerLink]="['/products', product.id]">
    <h3 class="product-name">{{ product.name }}</h3>
    <p class="product-description">{{ product.description }}</p>
    <div class="product-price">
      <span class="current-price">
        â‚¹{{ getCurrentPrice() }}
      </span>
      <span class="original-price" *ngIf="product.discount">
        â‚¹{{ product.price }}
      </span>
    </div>
    <div class="stock-info" [class.in-stock]="product.stock > 0" [class.out-of-stock]="product.stock === 0">
      {{ product.stock > 0 ? 'In Stock' : 'Out of Stock' }}
    </div>
  </div>
  <div class="product-actions">
    <button class="btn btn-primary btn-sm" 
            (click)="addToCart($event)"
            [disabled]="product.stock === 0">
      Add to Cart
    </button>
    <button class="btn btn-whatsapp btn-sm" 
            (click)="openWhatsApp($event, '')">
      <span class="whatsapp-icon">ðŸ’¬</span> Inquiry
    </button>
  </div>
</div>

<!-- Modal outside product-card to avoid positioning issues -->
<app-whatsapp-inquiry-modal 
  [product]="product"
  [isOpen]="showInquiryModal"
  (close)="closeInquiryModal()">
</app-whatsapp-inquiry-modal>

